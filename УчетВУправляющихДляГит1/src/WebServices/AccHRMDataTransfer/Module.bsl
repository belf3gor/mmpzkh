#Область СлужебныеПроцедурыИФункции

////////////////////////////////////////////////////////////////////////////////
// Обработчики операций

// Соответствует операции Upload.
Функция ВыполнитьВыгрузку(ХранилищеВыгруженныеДанные, ХранилищеПротоколВыгрузки)
	
	ПроверитьБлокировкуИнформационнойБазыДляОбновления();
	
	УстановитьПривилегированныйРежим(Истина);
	
	РезультатВыгрузки = ПереносДанныхБухгалтерия3Зарплата3.РезультатВыгрузкиДляЗарплатаКадры();
	
	ХранилищеВыгруженныеДанные = Новый ХранилищеЗначения(РезультатВыгрузки.ВыгруженныеДанные, Новый СжатиеДанных(9));
	ХранилищеПротоколВыгрузки  = Новый ХранилищеЗначения(РезультатВыгрузки.ПротоколВыгрузки, Новый СжатиеДанных(9));
	
КонецФункции

// Соответствует операции Ping.
Функция Ping()
	// Проверка связи.
	Возврат "";
КонецФункции

// Соответствует операции GetIBParameters.
Функция ПолучитьПараметрыИнформационнойБазы()
	
	Результат = ПереносДанныхБухгалтерия3Зарплата3.ПараметрыИнформационнойБазы();
	Возврат СериализаторXDTO.ЗаписатьXDTO(Результат);
	
КонецФункции


////////////////////////////////////////////////////////////////////////////////
// Локальные служебные процедуры и функции.

Процедура ПроверитьБлокировкуИнформационнойБазыДляОбновления()
	
	Если ЗначениеЗаполнено(ОбновлениеИнформационнойБазыСлужебный.ИнформационнаяБазаЗаблокированаДляОбновления()) Тогда
		
		ВызватьИсключение НСтр("ru = 'Перенос данных временно недоступен в связи с обновлением приложения в Интернете.'");
		
	КонецЕсли;
	
КонецПроцедуры


#КонецОбласти
