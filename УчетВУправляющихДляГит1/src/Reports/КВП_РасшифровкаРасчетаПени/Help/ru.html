<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html;charset=utf-8" http-equiv="content-type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.9600.19003"></meta></head><body>
<h1>Отчет «Расшифровка расчета пени»</h1>
<p class="Usual">Отчет предназначен для подробной расшифровки расчета пени по лицевым счетам объектов учета или документа <a href="Document.КВП_НачислениеПени/Help">«Начисление пени»</a>.</p>
<p class="Usual">Перед формированием отчета необходимо указать:</p>
<ul><li>«<strong>Период</strong>» – период формирования отчета в виде месяца или произвольного интервала месяцев; 
</li><li>«<strong>Организация</strong>» – организация, предоставляющая услуги; 
</li><li>«<strong>Объект</strong>» – объект, по которому собираются данные по начислению пени - выбирается элемент, группа справочника <a href="Catalog.КВП_ЛицевыеСчета/Help">«Лицевые счета»</a>, <a href="Catalog.КВП_Подъезды/Help">«Подъезды»</a>, <a href="Catalog.КВП_Здания/Help">«Здания»</a> или документ <a href="Document.КВП_НачислениеПени/Help">«Начисление пени»</a>.</li></ul><p class="Usual">На форме доступны следующие настройки формирования отчета:</p>
<ul><li>«<strong>Выводить данные по услугам</strong>» – определяет, нужно ли выводить данные отчета с детализацией по услугам; 
</li><li>«<strong>Вариант группировки данных</strong>» – определяет порядок группировки данных в отчете. Настройка может принимать следующие значения: 
<ul><li>«<strong>сначала месяц</strong>» - данные в отчете будут сгруппированы сначала по месяцам начисления, затем по услугам; 
</li><li>«<strong>сначала услуга</strong>» - данные в отчете будут сгруппированы сначала по услугам, затем по месяцам начисления.</li></ul></li></ul><p class="Important" align="justify"><strong>Примечание</strong><br>Если настройка «<strong>Выводить данные по услугам</strong>» не установлена, то настройка варианта группировки данных недоступна. В этом случае данные в отчете будут сгруппированы только по месяцам начисления.</p>
<ul><li>«<strong>Выводить строки с нулевой базой</strong>» – определяет необходимость вывода в отчет строк с нулевой базой. Если данная настройка установлена, то в отчет будут выведены строки расшифровки, в которых база для расчета пени равна нулю; 
</li><li>«<strong>Сворачивать строки по базе и ставке пени</strong>» – определяет необходимость свертки строк отчета, в которых сумма базы и ставка пени совпадают, а периоды начисления пени являются смежными, т.е. дата начала следующего периода следует сразу за датой окончания предыдущего периода.</li></ul><p class="Usual">В командной панели формы отчета расположена команда «<strong>Сформировать отчет</strong>», при нажатии на которую выполняется формирование отчета.</p>
<p class="Usual">Отчет доступен в списке отчетов раздела «Начисление услуг».</p>
<h3>Проблема копеек при расчете пени в документе "Начисление пени" и отчете "Расшифровка расчета пени":</h3>
<p class="Usual">Проблема заключается в том, что итоговые суммы пени по данным документа и отчета могут различаться на несколько копеек, и возникает она по следующей причине:</p>
<p class="Usual">1. Сейчас при расчете пени в документе "Начисление пени" за каждый подпериод расчета и месяц долга сумма пени рассчитывается отдельно, в результате на каждом таком подпериоде сумма пени не округляется.<br><em>Например, пени за период с 1 по 31 мая за непогашенный долг января составляет 4,346256 рублей.</em></p><em></em>
<p class="Usual"><br>После расчета пени по всем периодам и услугам, неокругленные суммы пени складываются по лицевому счету и услуге, в результате чего получается число с высокой точностью.<br><em>Например, по лицевому счет №00001 за услугу "Горячее водоснабжение" сумма пени составила 128,52578 рублей</em>.</p>
<p class="Usual"><br>После сложения сумм происходит их округление до копеек.<br><em>Например, по лицевому счет №00001 за услугу "Горячее водоснабжение" сумма пени в результате округления составляет 128,53 рубля.</em></p>
<p class="Usual">Т.е. результата расчета пени в рублях получается только на последнем этапе, когда суммы пени уже посчитаны по лицевому счету и услуге в целом.</p>
<p class="Usual">2. В отчете “Расшифровка расчета пени” расчет сумм за каждый подпериод расчета и месяц долга производится аналогично документу "Начисление пени", без округления сумм, далее группировка и округление сумм пени выполняются уже по-другому, с учетом структуры формирования данных в отчете.</p>
<p class="Usual">Суммы пени, полученные по подпериодам, складываются на разных уровнях группировки данных отчета без округления, а потом округляются на каждом уровне группировки отдельно, в результате чего итоговые суммы пени могут не соответствовать данным документов "Начисление пени".</p>
<p class="Usual"><em>Например, структура данных отчета имеет следующий вид:</em></p>
<ul><li>
<div><em>лицевой счет;</em></div>
<ul><li>
<div><em>Настройка расчета пени - 5,810503 (5,81);</em></div>
<ul><li>
<div><em>Месяц долга - 5,810503 (5,81);</em></div>
<ul><li>
<div><em>Услуга - 5,810503 (5,81);</em></div>
<ul><li>
<div><em>Детальные записи расчета - 4,346256 (4,35);</em></div>
</li><li>
<div><em>Детальные записи расчета - 1,464247 (1,46).</em></div></li></ul></li></ul></li></ul></li></ul></li></ul><p class="Usual">Т.е. суммы пени с высокой точностью сначала складываются на всех уровнях группировки, а потом округляются на каждом уровне для определения суммы в рублях. При этом суммы соответствующих уровней-родителей и вложенных уровней могут различаться из-за округления, а также итоговые суммы могут отличаться от итоговых сумм начисления пени в документах "Начисление пени".</p>
<p class="Usual">При этом можно пробовать сначала округлять суммы на более низких уровнях группировок отчета, например, по услугам, а высокие уровни уже пересчитывать по округленным нижним, но все-равно получится либо разица в суммах с фактическими начислениями пени, либо нестыковка математики между суммами детальных записей выше стоящим уровнем группировки.</p>
<p class="Usual"><strong>Способы решения проблемы:</strong></p>
<ol><li>
<div>Округление сумм пени до копеек производить сразу при расчете пени на каждом подпериоде расчета, а затем складывать или группировать уже округленные суммы как в документе, так и в отчете. При этом на каждом подпериоде расчета будет получена сразу готовая сумма пени в рублях. При этом итоговые суммы скорее-всего будут отличаться от тех, которые получаются в результате текущего варианта расчета. Данный вариант предпочтительно, но нужно понимание, верно ли округлять суммы пени до рублей на каждом подпериоде и от каждого месяца долга.</div>
</li><li>
<div>Использовать только ту структуру отчета "Расшифровки расчета пени", которая бы в точности соответствовала группировке и округлению сумм в документе "Начисление пени", а именно:</div></li></ol><ul><ul><li>
<div>лицевой счет;</div>
</li><li>
<div>услуга;</div>
</li><li>
<div>месяц начисления пени (не путать с месяцем долга для расчета пени);</div>
</li><li>
<div>детальные записи расчета.</div></li></ul></ul><blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<p>Данный вариант будет избавлен от проблем копеек на разных уровнях группировки, только если суммы пени на уровне детальных записей не будут округляться, а будут выводиться с высокой точностью.<br>При этом не факт, что такая структура отчета устроит тех, кому он предоставляется.<br></p></blockquote></body></html>