
#Область ОбработчикиСобытийФормы

&НаСервере
// Процедура формирования запроса к сервису рассылки.
Процедура СформироватьЗапросСервер(ТекстОшибки)
	
	смсОбменССайтом.ПолучитьДанныеССайта(ВидЗапроса, PINкод, ТекстОшибки);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийФормы

&НаСервере
// Обработчик события "ПриСозданииНаСервере" формы.
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ВидЗапроса = Параметры.ВидЗапроса;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
// Обработчик события "Нажатие" поля "Сайт".
Процедура СайтНажатие(Элемент)
	
	ОписаниеОповещения = Новый ОписаниеОповещения("НачатьЗапускПриложенияЗавершение", ЭтаФорма);
	НачатьЗапускПриложения(ОписаниеОповещения, "http://www.otr-soft.ru");
	
КонецПроцедуры

&НаКлиенте
Процедура НачатьЗапускПриложенияЗавершение(КодВозврата, ДополнительныеПараметры) Экспорт
	
	Возврат;
	
КонецПроцедуры

&НаКлиенте
// Обработчик команды.
Процедура Ок(Команда)
	
	ТекстОшибки = "";
	
	СформироватьЗапросСервер(ТекстОшибки);
	
	// Если не удалось получить данные с сайта, выводим предупреждение.
	ОповещениеОЗакрытииПредупреждения = Новый ОписаниеОповещения("ОбработатьЗакрытиеОкнаПредупреждения", ЭтаФорма);
	Если НЕ ТекстОшибки = "" Тогда
		ПоказатьПредупреждение(ОповещениеОЗакрытииПредупреждения, ТекстОшибки);
	Иначе
		Закрыть();
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
// Обработчик закрытия окна предупреждения.
//
Процедура ОбработатьЗакрытиеОкнаПредупреждения(ДопПараметры) Экспорт
	
	Закрыть();
	
КонецПроцедуры

&НаКлиенте
// Обработчик команды "Отмена".
Процедура Отмена(Команда)

	Закрыть();

КонецПроцедуры

#КонецОбласти
