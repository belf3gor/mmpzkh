#Область ОбработчикиКоманд

&НаКлиенте
// Обработчик команды "НачатьОбновление".
//
Процедура КомандаНачатьОбновление(Команда)
	
	ОткрытьФорму("Обработка.УПЖКХ_ПомощникОбновленияКонфигурации.Форма.Форма",,ЭтаФорма,,ВариантОткрытияОкна.ОтдельноеОкно,,,РежимОткрытияОкнаФормы.БлокироватьВесьИнтерфейс);
	
	// Закрываем эту форму, оставляем только помощник.
	Закрыть();
	
КонецПроцедуры

&НаКлиенте
// Обработчик события "ОбработкаНавигационнойСсылки" поля "ДекорацияОписаниеДействийПримечание".
//
Процедура ДекорацияОписаниеДействийПримечаниеОбработкаНавигационнойСсылки(Элемент, НавигационнаяСсылкаФорматированнойСтроки, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	Если НавигационнаяСсылкаФорматированнойСтроки = "Открыть конфигуратор" Тогда
		Если Не КонфигураторЗапущен() Тогда
			ЗавершитьРаботуСистемы(Истина, Истина, "CONFIG");
		Иначе
			ЗавершитьРаботуСистемы(Истина);
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры // ДекорацияОписаниеДействийПримечаниеОбработкаНавигационнойСсылки()

#КонецОбласти

#Область ВспомогательныеПроцедурыИФункции

&НаСервереБезКонтекста
// Проверка факта запуска конфигуратора.
//
Функция КонфигураторЗапущен()
	
	Возврат СоединенияИБ.ИнформацияОСоединениях().НаличиеСоединенияКонфигуратором;
	
КонецФункции // ПроверитьФактЗапускаКонфигуратора()

#КонецОбласти