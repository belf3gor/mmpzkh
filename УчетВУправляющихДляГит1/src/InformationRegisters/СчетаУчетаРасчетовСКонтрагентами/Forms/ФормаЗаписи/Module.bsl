&НаСервереБезКонтекста
Функция ВидРасчетовПоПараметрамДоговора(Знач Договор)

	Возврат БухгалтерскийУчетПереопределяемый.ОпределениеВидаРасчетовПоПараметрамДоговора(Договор);

КонецФункции 

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	ПустойДоговор = БухгалтерскийУчетПереопределяемый.ПолучитьПустоеЗначениеДоговора();

КонецПроцедуры

&НаКлиенте
Процедура ВидРасчетовПоДоговоруПриИзменении(Элемент)

	Запись.Договор = ПустойДоговор;

КонецПроцедуры

&НаКлиенте
// Процедура - обработчик события "ОбработкаВыбора" поля Договор
//
Процедура ДоговорОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)

	Если НЕ ЗначениеЗаполнено(ВыбранноеЗначение) ИЛИ ТипЗнч(ВыбранноеЗначение) = Тип("Тип") тогда
		Возврат;
	КонецЕсли;

	Запись.ВидРасчетовПоДоговору = ВидРасчетовПоПараметрамДоговора(ВыбранноеЗначение);

КонецПроцедуры

&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)

	Если НЕ ЗначениеЗаполнено(Запись.Контрагент)
		И ЗначениеЗаполнено(Запись.Договор) Тогда // если заполнена - значит это был переход по кнопке перейти.
		ТекущийОбъект.Контрагент = БухгалтерскийУчетПереопределяемый.ПолучитьКонтрагентаПоДоговору(Запись.Договор);
	КонецЕсли;

	Если ЗначениеЗаполнено(Запись.Договор) Тогда
		ТекущийОбъект.ВидРасчетовПоДоговору = БухгалтерскийУчетПереопределяемый.ОпределениеВидаРасчетовПоПараметрамДоговора(Запись.Договор);
	КонецЕсли;

КонецПроцедуры
