
////////////////////////////////////////////////////////////////////////////////
// ПРОЧИЕ ПРОЦЕДУРЫ И ФУНКЦИИ

#Область ПрочиеПроцедурыИФункции

&НаКлиенте
// Процедура устанавливает видимость и доступность элементов управления формы.
Процедура УстановитьВидимостьИДоступность()
	
	Элементы.Услуга.Доступность = ЗначениеЗаполнено(Запись.УслугаОбщедомовогоСчетчика);
	
КонецПроцедуры

&НаСервереБезКонтекста
// Функция получает способ расчета услуги.
Функция ПолучитьСпособРасчетаУслуги(мУслуга)
	
	Возврат Справочники.КВП_Услуги.ПолучитьСпособРасчетаУслуги(мУслуга);
	
КонецФункции

&НаСервереБезКонтекста
// Функция сравнивает способы расчета двух услуг.
Функция СпособыРасчетаСовпадают(Услуга1, Услуга2)
	
	Возврат Справочники.КВП_Услуги.СпособыРасчетаСовпадают(Услуга1, Услуга2);
	
КонецФункции

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// ОбщиеМеханизмыИКоманды
	ОТР_ПодключаемыеОбщиеМеханизмыИКоманды.ПриСозданииНаСервере(ЭтаФорма);
	// Конец ОбщиеМеханизмыИКоманды
	
КонецПроцедуры

&НаКлиенте
// Процедура обработчик события "ПриОткрытии" формы записи.
Процедура ПриОткрытии(Отказ)
	
	УстановитьВидимостьИДоступность();
	
КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
// Процедура обработчик события "ПриИзменении" поля ввода "УслугаОбщедомовогоСчетчика".
Процедура УслугаОбщедомовогоСчетчикаПриИзменении(Элемент)
	
	Если ЗначениеЗаполнено(Запись.УслугаОбщедомовогоСчетчика)
	   И ЗначениеЗаполнено(Запись.Услуга) Тогда
		
		Если НЕ СпособыРасчетаСовпадают(Запись.Услуга, Запись.УслугаОбщедомовогоСчетчика) Тогда
			Запись.Услуга = ПредопределенноеЗначение("Справочник.КВП_Услуги.ПустаяСсылка");
		КонецЕсли;
		
	КонецЕсли;
	
	УстановитьВидимостьИДоступность();
	
КонецПроцедуры

&НаКлиенте
// Процедура обработчик события "НачалоВыбора" поля ввода "Услуга".
Процедура УслугаНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	СтруктураПараметров = Новый Структура;
	СтруктураПараметров.Вставить("СпособРасчета", ПолучитьСпособРасчетаУслуги(Запись.УслугаОбщедомовогоСчетчика));
	ОткрытьФорму("Справочник.КВП_Услуги.Форма.ФормаВыбора", СтруктураПараметров, Элемент);
	
КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

#Область ОбработчикиКомандФормы

// ЧастоЗадаваемыеВопросы
&НаКлиенте
// Подключаемый обработчик команды перехода к часто задаваемым вопросам.
Процедура Подключаемый_ЧастоЗадаваемыеВопросыОткрытьСсылку(Команда)
	
	ОТР_ЧастоЗадаваемыеВопросыКлиент.Подключаемый_ЧастоЗадаваемыеВопросыОткрытьСсылку(Команда);
	
КонецПроцедуры
// Конец ЧастоЗадаваемыеВопросы

#КонецОбласти
