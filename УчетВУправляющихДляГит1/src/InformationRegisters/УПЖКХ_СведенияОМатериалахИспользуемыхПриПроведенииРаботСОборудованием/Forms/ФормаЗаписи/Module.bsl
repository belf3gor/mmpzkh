
///////////////////////////////////////////////////////////////////////////////////////////////////
// ВСПОМОГАТЕЛЬНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

#Область ВспомогательныеПроцедурыИФункции

&НаСервереБезКонтекста
// Функция возвращает список материалов, доступных для вида метариала.
//
Функция ПолучитьСписокДоступныхМатериаловДляВидаМатериала(ВидМатериала)
	
	СписокМатериалов = Новый СписокЗначений;
	Для Каждого ТекСтрока Из ВидМатериала.Материалы Цикл
		СписокМатериалов.Добавить(ТекСтрока.Номенклатура);
	КонецЦикла;
	
	Возврат СписокМатериалов;
	
КонецФункции

&НаКлиентеНаСервереБезКонтекста
// Процедура обновляет список выбора материала.
//
Процедура ОбновитьСписокВыбораМатериала(Форма)
	
	СписокВыбора = Форма.Элементы.Номенклатура.СписокВыбора;
	СписокВыбора.Очистить();
	
	Для Каждого ТекМатериал Из ПолучитьСписокДоступныхМатериаловДляВидаМатериала(Форма.Запись.ВидМатериала) Цикл
		СписокВыбора.Добавить(ТекМатериал.Значение);
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

///////////////////////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

#Область ОбработчикиСобытийФормы

&НаСервере
// Обработчик события "ПриСозданииНаСервере".
//
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ОбновитьСписокВыбораМатериала(ЭтаФорма);
	
КонецПроцедуры

#КонецОбласти

///////////////////////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
// Обработчик события "ПриИзменении" поля "ВидМатериала".
//
Процедура ВидМатериалаПриИзменении(Элемент)
	
	ОбновитьСписокВыбораМатериала(ЭтаФорма);
	
КонецПроцедуры

#КонецОбласти