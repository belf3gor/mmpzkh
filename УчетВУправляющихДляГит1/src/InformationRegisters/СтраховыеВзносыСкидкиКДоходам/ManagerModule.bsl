#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область СлужебныеПроцедурыИФункции

// Процедура выполняет первоначальное заполнение сведений.
Процедура НачальноеЗаполнение() Экспорт
	
	НаборЗаписей = РегистрыСведений.СтраховыеВзносыСкидкиКДоходам.СоздатьНаборЗаписей();
	НаборЗаписей.ДополнительныеСвойства.Вставить("ЗаписьОбщихДанных");
	НаборЗаписей.Записать();
	
	ЗаполнитьСкидкиКДоходамПоСтраховымВзносам();
	ОписатьДополнительныеСкидкиКДоходамПоСтраховымВзносам();
	
КонецПроцедуры

Процедура ЗаполнитьСкидкиКДоходамПоСтраховымВзносам()

	СпрВидов = Справочники.ВидыДоходовПоСтраховымВзносам;

	// ---------------------------------------------------
	// ЗНАЧЕНИЯ СКИДОК К ДОХОДАМ НА 01.01.2010

	Запрос = Новый Запрос;
	Запрос.Текст =
		"ВЫБРАТЬ
		|	Доходы.Ссылка
		|ИЗ
		|	Справочник.ВидыДоходовПоСтраховымВзносам КАК Доходы
		|ГДЕ
		|	Доходы.Предопределенный";

	СписокПредопределенныхКодовДоходов = Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("Ссылка");

	ДатаСведений = '20100101';

	НаборЗаписей = РегистрыСведений.СтраховыеВзносыСкидкиКДоходам.СоздатьНаборЗаписей();
	НаборЗаписей.ДополнительныеСвойства.Вставить("ЗаписьОбщихДанных");
	
	// Удалим ранее установленные значения на дату сведений по предопределенным элементам.
	НаборЗаписей.Отбор.Период.Значение = ДатаСведений;
	НаборЗаписей.Отбор.Период.Использование = Истина;

	НаборЗаписей.Отбор.ВидДохода.ВидСравнения = ВидСравнения.Равно;
	НаборЗаписей.Отбор.ВидДохода.Использование = Истина;
	Для Каждого ВидДохода Из СписокПредопределенныхКодовДоходов Цикл
		НаборЗаписей.Отбор.ВидДохода.Значение = ВидДохода;
		НаборЗаписей.Записать();
	КонецЦикла;

	// Отменим фильтр по кодам доходов перед получением оставшихся записей на дату сведений.
	НаборЗаписей.Отбор.ВидДохода.Использование = Ложь;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.Матпомощь;
	НоваяЗапись.ГодоваяСкидка	= 4000;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.МатпомощьПриРожденииРебенка;
	НоваяЗапись.НормативЗатрат	= 50000;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеАудиовизуальныеПроизведения;
	НоваяЗапись.НормативЗатрат	= 30;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеГрафическиеПроизведения;
	НоваяЗапись.НормативЗатрат	= 30;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеДругиеМузыкальныеПроизведения;
	НоваяЗапись.НормативЗатрат	= 25;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеИсполнениеПроизведений;
	НоваяЗапись.НормативЗатрат	= 20;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеЛитературныеПроизведения;
	НоваяЗапись.НормативЗатрат	= 20;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеМузыкальноСценическиеПроизведение;
	НоваяЗапись.НормативЗатрат	= 40;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеНаучныеТруды;
	НоваяЗапись.НормативЗатрат	= 20;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеОткрытия;
	НоваяЗапись.НормативЗатрат	= 30;
	
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.АвторскиеСкульптуры;
	НоваяЗапись.НормативЗатрат	= 40;
	
	НаборЗаписей.Записать();

КонецПроцедуры

Процедура ОписатьДополнительныеСкидкиКДоходамПоСтраховымВзносам() Экспорт

	СпрВидов = Справочники.ВидыДоходовПоСтраховымВзносам;
	
	ДатаСведений = '20100101';

	НаборЗаписей = РегистрыСведений.СтраховыеВзносыСкидкиКДоходам.СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Период.Значение = ДатаСведений;
	НаборЗаписей.Отбор.Период.Использование = Истина;
	НаборЗаписей.Отбор.ВидДохода.ВидСравнения = ВидСравнения.Равно;
	НаборЗаписей.Отбор.ВидДохода.Использование = Истина;
	НаборЗаписей.ДополнительныеСвойства.Вставить("ЗаписьОбщихДанных");
	
	НаборЗаписей.Отбор.ВидДохода.Значение = СпрВидов.МатпомощьПрокуроров;
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.МатпомощьПрокуроров;
	НоваяЗапись.ГодоваяСкидка	= 4000;
	НаборЗаписей.Записать();
	НаборЗаписей.Очистить();
	НаборЗаписей.Отбор.ВидДохода.Значение = СпрВидов.МатпомощьПриРожденииРебенкаПрокуроров;
 	НоваяЗапись = НаборЗаписей.Добавить();
	НоваяЗапись.Период			= ДатаСведений;
	НоваяЗапись.ВидДохода		= СпрВидов.МатпомощьПриРожденииРебенкаПрокуроров;
	НоваяЗапись.НормативЗатрат	= 50000;
	// Запишем набор записей
	НаборЗаписей.Записать();
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли