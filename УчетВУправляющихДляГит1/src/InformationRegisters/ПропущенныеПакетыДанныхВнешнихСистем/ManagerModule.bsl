#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Записывает информацию о пакете, который был получен из внешней системы, но данные которого не удалось загрузить.
//
// Параметры:
//  Сеанс				 - СправочникСсылка.СеансыЗагрузкиДанныхВнешнихСистем - сеанс, в ходе которого получен пакет
//  АдресДанных			 - Строка - адрес во временном хранилище, содержащем сериализованные данные пакета
//  Ошибка				 - Строка - пользовательское представление ошибки, которая не позволила загрузить данные
//  ИдентификаторПакета	 - Строка - идентификатор пакета, сообщенный подсистемой интернет-поддержки
//
Процедура Зарегистрировать(Сеанс, АдресДанных, Ошибка, ИдентификаторПакета) Экспорт
	
	Запись = СоздатьМенеджерЗаписи();
	
	Запись.Сеанс               = Сеанс;
	Запись.Данные              = Новый ХранилищеЗначения(ПолучитьИзВременногоХранилища(АдресДанных));
	Запись.Ошибка              = Ошибка;
	
	Попытка
		// Подсистема интернет-поддержки не гарантирует корректную передачу идентификатора пакета
		ИдентификаторПакетаUUID = Новый УникальныйИдентификатор(ИдентификаторПакета);
	Исключение
		ИдентификаторПакетаUUID = Новый УникальныйИдентификатор;
	КонецПопытки;
	
	Запись.ИдентификаторПакета = ИдентификаторПакетаUUID;
	Запись.Записать();
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
