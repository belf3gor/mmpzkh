
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("ПараметрыСтавки") Тогда
		
		Отборы = Новый Массив;
		Отборы.Добавить(Параметры.ПараметрыСтавки);
		
		Ключ = Новый(Тип("РегистрСведенийКлючЗаписи.СтавкиТранспортногоНалога"), Отборы);
		
		Если НЕ Ключ.Пустой() Тогда
			Элементы.Список.ТекущаяСтрока = Ключ;
		КонецЕсли;
		
	КонецЕсли;
	
	УстановитьУсловноеОформление();
	
КонецПроцедуры

&НаСервере
Процедура УстановитьУсловноеОформление()
	
	Макет = РегистрыСведений.СтавкиТранспортногоНалога.ПолучитьМакет("КодыОКТМОСубъектовРФ");
	КодыОКТМОСубъектовРФ = ОбщегоНазначения.ПрочитатьXMLВТаблицу(Макет.ПолучитьТекст()).Данные;
	
	ТаблицаРегионов = АдресныйКлассификатор.СубъектыРФ();
	
	ШаблонПредставления = НСтр("ru='%1 %2'"); //например: "Москва г"
	Для Каждого Регион Из ТаблицаРегионов Цикл
		
		СтрокаСоответствия = КодыОКТМОСубъектовРФ.Найти(Строка(Регион.КодСубъектаРФ), "КодСубъектаРФ");
		
		Если СтрокаСоответствия <> Неопределено Тогда
		
			Представление = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(ШаблонПредставления,
				Регион.Наименование,
				Регион.Сокращение);
				
			ЭлементУО = УсловноеОформление.Элементы.Добавить();

			КомпоновкаДанныхКлиентСервер.ДобавитьОформляемоеПоле(ЭлементУО.Поля, "ОКТМО");

			ОбщегоНазначенияКлиентСервер.ДобавитьЭлементКомпоновки(ЭлементУО.Отбор,
				"Список.ОКТМО", ВидСравненияКомпоновкиДанных.Равно, СтрокаСоответствия.КодОКТМО);

			ЭлементУО.Оформление.УстановитьЗначениеПараметра("Текст", Представление);
			
		КонецЕсли;
		
	КонецЦикла;
	
	
КонецПроцедуры
