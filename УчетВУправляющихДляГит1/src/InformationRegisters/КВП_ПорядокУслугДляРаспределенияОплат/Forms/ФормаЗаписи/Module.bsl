
#Область СлужебныеПроцедурыИФункции

&НаСервере
// Процедура - обработчик события "ПриСозданииНаСервере" записи регистра.
//
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ТЗ =
	"ВЫБРАТЬ
	|	МАКСИМУМ(КВП_ПорядокУслугДляРаспределенияОплат.Порядок) КАК Порядок
	|ИЗ
	|	РегистрСведений.КВП_ПорядокУслугДляРаспределенияОплат КАК КВП_ПорядокУслугДляРаспределенияОплат";
	
	Запрос = Новый Запрос(ТЗ);
	Выборка = Запрос.Выполнить().Выбрать();
	
	НовПорядок = ?(Выборка.Следующий() И Выборка.Порядок <> Null, Выборка.Порядок + 1, 1);
	
	Запись.Порядок = НовПорядок;
	
КонецПроцедуры

#КонецОбласти