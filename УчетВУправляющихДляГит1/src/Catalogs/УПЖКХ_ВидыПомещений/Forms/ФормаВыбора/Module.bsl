
#Область ОбработчикиЭлементовФормы

&НаКлиенте
// При открытии формы элемента передаем в нее установленные в списке отборы.
//
Процедура ОткрытьФормуЭлементаСУчетомОтбора(ЭлементСправочника, СписокОтборов, ВладелецФормыЭлемента)
	
	Если ТипЗнч(ЭлементСправочника) = Тип("СправочникСсылка.УПЖКХ_ВидыПомещений") Тогда
		
		ФормаЭлемента = ПолучитьФорму("Справочник.УПЖКХ_ВидыПомещений.Форма.ФормаЭлемента",
										Новый Структура("Ключ, СписокОтборов", ЭлементСправочника, СписокОтборов), ВладелецФормыЭлемента);
		ФормаЭлемента.Открыть();
		
	КонецЕсли;

КонецПроцедуры // ОткрытьФормуЭлементаСУчетомОтбора()

&НаКлиенте
// Процедура - обработчик события "ПередНачаломДобавления" поля "Список".
//
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	
	Если НЕ Группа И Не Копирование Тогда
		
		Отказ = Истина;
		
		НовыйЭлемент = ПредопределенноеЗначение("Справочник.УПЖКХ_ВидыПомещений.ПустаяСсылка");
		
		ОткрытьФормуЭлементаСУчетомОтбора(НовыйЭлемент, Список.Отбор, Элемент);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
// Процедура - обработчик события "ПередНачаломИзменения" поля "Список".
//
Процедура СписокПередНачаломИзменения(Элемент, Отказ)
	
	Если НЕ Элемент.ТекущиеДанные = Неопределено И НЕ Элемент.ТекущиеДанные.ЭтоГруппа Тогда
		
		Отказ = Истина;
		
		ОткрытьФормуЭлементаСУчетомОтбора(Элемент.ТекущаяСтрока, Список.Отбор, Элемент);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти