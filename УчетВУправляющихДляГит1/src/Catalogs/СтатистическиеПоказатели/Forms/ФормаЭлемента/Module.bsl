
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	НастроитьДетализацию();
	
КонецПроцедуры

&НаКлиенте
Процедура ОбъектНаблюденияПриИзменении(Элемент)
	
	НастроитьДетализацию();
	
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
	
	НастроитьДетализацию();
	
КонецПроцедуры

&НаСервере
Процедура НастроитьДетализацию()
	
	Детализация = Объект.Владелец.Детализация;
	
	Если Не ЗначениеЗаполнено(Детализация) Тогда
		
		Если Объект.Детализировать Тогда
			Объект.Детализировать = Ложь;
			Модифицированность = Истина;
		КонецЕсли;
		
		Элементы.Детализировать.Доступность = Ложь;
		Возврат;
		
	КонецЕсли;
	
	Элементы.Детализировать.Доступность = Истина;
	
	ПредставлениеКлассификатора = Перечисления.ВидыСвободныхСтрокФормСтатистики.КраткоеПредставлениеКлассификатора(Детализация);
	Если ЗначениеЗаполнено(ПредставлениеКлассификатора) Тогда
		ШаблонЗаголовка = НСтр("ru = 'Детализировать по %1'");
	Иначе
		ШаблонЗаголовка = НСтр("ru = 'Детализировать'");
	КонецЕсли;
	
	Элементы.Детализировать.Заголовок   = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(ШаблонЗаголовка, ПредставлениеКлассификатора);
	
КонецПроцедуры
