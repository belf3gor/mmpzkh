
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Объект.ЭтоПеревозкаПассажиров Тогда
		ОказываемыеУслуги = 1; // Перевозка пассажиров
	ИначеЕсли Объект.ЭтоПеревозкаГрузов Тогда
		ОказываемыеУслуги = 2; // Перевозка грузов
	ИначеЕсли Объект.УказатьОбъекты Тогда
		ОказываемыеУслуги = 3; // Сдача в аренду, торговля, общественное питание
	КонецЕсли;
	
	УправлениеФормой();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура КодПриИзменении(Элемент)
	
	Если СтрДлина(Объект.Код) = 1 Тогда
		Объект.Код = СтрШаблон(НСтр("ru = '0%1'"), Объект.Код);
	КонецЕсли;
	ОбновитьКодТипаТС();
	
КонецПроцедуры

&НаКлиенте
Процедура УслугиПоПеревозкеПриИзменении(Элемент)
	
	Если ОказываемыеУслуги = 0 Или ОказываемыеУслуги = 3 Тогда
		Объект.ЭтоВодныйТранспорт = Не(ОказываемыеУслуги = 0 Или ОказываемыеУслуги = 3);
	Иначе
		Объект.ЭтоПеревозкаПассажиров = ОказываемыеУслуги = 1;
		Объект.ЭтоПеревозкаГрузов = ОказываемыеУслуги = 2;
		Объект.УказатьОбъекты = ОказываемыеУслуги = 3;
	КонецЕсли;
	
	ОбновитьКодТипаТС();
	УправлениеФормой();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УправлениеФормой()
	
	Элементы.ГруппаХарактеристикиТС.Доступность = ОказываемыеУслуги = 1 Или ОказываемыеУслуги = 2;
	
КонецПроцедуры

&НаКлиенте
Процедура ОбновитьКодТипаТС()
	
	Соответствие = СоответствиеКодовИТиповТранспортныхСредств();
	ДанныеТипаТС = Соответствие.Получить(Объект.Код);
	
	Если ДанныеТипаТС <> Неопределено Тогда
		Объект.КодТипаТС = ДанныеТипаТС;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Функция СоответствиеКодовИТиповТранспортныхСредств()
	
	Соответствие = Новый Соответствие;
	Соответствие.Вставить("10", "01"); // Оказание автотранспортных услуг по перевозке грузов автомобильным транспортом
	Соответствие.Вставить("11", "02"); // Оказание автотранспортных услуг по перевозке пассажиров автомобильным транспортом
	Соответствие.Вставить("32", "03"); // Оказание услуг по перевозке пассажиров водным транспортом
	Соответствие.Вставить("33", "04"); // Оказание услуг по перевозке грузов водным транспортом
	
	Возврат Соответствие;
	
КонецФункции

#КонецОбласти