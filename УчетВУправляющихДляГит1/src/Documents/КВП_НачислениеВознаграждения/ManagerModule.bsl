#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область СлужебныеПроцедурыИФункции

// Функция возвращает параметры проведения.
Функция ПодготовитьПараметрыПроведения(ДокументСсылка, Отказ) Экспорт

	ПараметрыПроведения = Новый Структура;
	
	Запрос = Новый Запрос;
	
	Запрос.УстановитьПараметр("Ссылка", ДокументСсылка);
	Запрос.Текст =
	"ВЫБРАТЬ
	|	Реквизиты.Ссылка,
	|	Реквизиты.Номер,
	|	Реквизиты.Дата,
	|	Реквизиты.Ответственный,
	|	Реквизиты.Организация,
	|	Реквизиты.УправляющаяКомпания,
	|	Реквизиты.СчетВознаграждения,
	|	Реквизиты.СубконтоСчетаВознаграждения1,
	|	Реквизиты.СубконтоСчетаВознаграждения2,
	|	Реквизиты.СубконтоСчетаВознаграждения3,
	|	Реквизиты.ОтражатьВБухгалтерскомУчете,
	|	Реквизиты.СчетРасчетовСПоставщиками,
	|	Реквизиты.СубконтоСчетаРасчетовСПоставщиками1,
	|	Реквизиты.СубконтоСчетаРасчетовСПоставщиками2,
	|	Реквизиты.СубконтоСчетаРасчетовСПоставщиками3,
	|	Реквизиты.МесяцНачисления,
	|	Реквизиты.СчетУчетаНДС,
	|	Реквизиты.СубконтоСчетаУчетаНДС1,
	|	Реквизиты.СубконтоСчетаУчетаНДС2,
	|	Реквизиты.СубконтоСчетаУчетаНДС3,
	|	Реквизиты.СуммаДокумента
	|ИЗ
	|	Документ.КВП_НачислениеВознаграждения КАК Реквизиты
	|ГДЕ
	|	Реквизиты.Ссылка = &Ссылка";
	
	Выборка = Запрос.Выполнить().Выбрать();
	Выборка.Следующий();
	
	Реквизиты = Новый Структура("Ссылка,Номер,Дата,Ответственный,Организация,УправляющаяКомпания,
								|СчетВознаграждения,СубконтоСчетаВознаграждения1,СубконтоСчетаВознаграждения2,СубконтоСчетаВознаграждения3,
								|ОтражатьВБухгалтерскомУчете,СчетРасчетовСПоставщиками,СубконтоСчетаРасчетовСПоставщиками1,СубконтоСчетаРасчетовСПоставщиками2,
								|СубконтоСчетаРасчетовСПоставщиками3,МесяцНачисления,СчетУчетаНДС,СубконтоСчетаУчетаНДС1,
								|СубконтоСчетаУчетаНДС2,СубконтоСчетаУчетаНДС3,СуммаДокумента");
	
	ЗаполнитьЗначенияСвойств(Реквизиты, Выборка);
	
	ПараметрыПроведения.Вставить("Реквизиты", Реквизиты);
	
	// Подготовим таблицу лицевых счетов.
	
	Запрос.Текст =
	"ВЫБРАТЬ
	|	Вознаграждения.Ссылка,
	|	Вознаграждения.Услуга,
	|	Вознаграждения.ПоставщикУслуг,
	|	Вознаграждения.СуммаНачисления,
	|	Вознаграждения.СуммаСбора,
	|	Вознаграждения.ПроцентВознаграждения,
	|	Вознаграждения.ПроцентШтрафа,
	|	Вознаграждения.СуммаВознаграждения,
	|	Вознаграждения.СтавкаНДС,
	|	Вознаграждения.СуммаНДС,
	|	Вознаграждения.СуммаВсего,
	|	Вознаграждения.НДСВТомЧисле,
	|	Вознаграждения.СпособРасчета
	|ИЗ
	|	Документ.КВП_НачислениеВознаграждения.Вознаграждения КАК Вознаграждения
	|ГДЕ
	|	Вознаграждения.Ссылка = &Ссылка";
	
	ТаблицаПоВознаграждениям = Запрос.Выполнить().Выгрузить();
	
	ПараметрыПроведения.Вставить("ТаблицаПоВознаграждениям", ТаблицаПоВознаграждениям);
	
	Возврат ПараметрыПроведения;
	
КонецФункции

#КонецОбласти

#Область ПроцедурыИФункцииПечати

// Заполняет список команд печати.
// 
// Параметры:
//   КомандыПечати - ТаблицаЗначений - состав полей см. в функции УправлениеПечатью.СоздатьКоллекциюКомандПечати.
//
Процедура ДобавитьКомандыПечати(КомандыПечати) Экспорт
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли