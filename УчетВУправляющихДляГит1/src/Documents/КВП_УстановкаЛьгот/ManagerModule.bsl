
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда	

#Область СлужебныеПроцедурыИФункции

////////////////////////////////////////////////////////////////////////////////
// Проведение

// Функция возвращает параметры проведения.
Функция ПодготовитьПараметрыПроведения(ДокументСсылка, Отказ) Экспорт

	ПараметрыПроведения = Новый Структура;
	
	Запрос = Новый Запрос;
	
	Запрос.УстановитьПараметр("Ссылка", ДокументСсылка);
	Запрос.Текст =
	"ВЫБРАТЬ
	|	Реквизиты.Ссылка,
	|	Реквизиты.Номер,
	|	Реквизиты.Дата,
	|	Реквизиты.ВидОперации,
	|	Реквизиты.Объект,
	|	Реквизиты.Комментарий,
	|	Реквизиты.Ответственный
	|ИЗ
	|	Документ.КВП_УстановкаЛьгот КАК Реквизиты
	|ГДЕ
	|	Реквизиты.Ссылка = &Ссылка";
	
	Выборка = Запрос.Выполнить().Выбрать();
	Выборка.Следующий();
	
	Реквизиты = Новый Структура("Ссылка,Номер,Дата,ВидОперации,Объект,Комментарий,Ответственный");
	
	ЗаполнитьЗначенияСвойств(Реквизиты, Выборка);
	
	ПараметрыПроведения.Вставить("Реквизиты", Реквизиты);
	
	// Подготовим таблицу лицевых счетов.
	
	Запрос.Текст =
	"ВЫБРАТЬ
	|	СписокЛьгот.Льгота,
	|	СписокЛьгот.ДатаНачала,
	|	СписокЛьгот.ДатаОкончания,
	|	СписокЛьгот.ВидДокумента,
	|	СписокЛьгот.СерияДокумента,
	|	СписокЛьгот.НомерДокумента,
	|	СписокЛьгот.ДатаВыдачиДокумента,
	|	СписокЛьгот.ДатаОкончанияДокумента,
	|	СписокЛьгот.КемВыдан,
	|	СписокЛьгот.ВидДокумента2,
	|	СписокЛьгот.СерияДокумента2,
	|	СписокЛьгот.НомерДокумента2,
	|	СписокЛьгот.ДатаВыдачиДокумента2,
	|	СписокЛьгот.ДатаОкончанияДокумента2,
	|	СписокЛьгот.КемВыдан2,
	|	СписокЛьгот.ВидДокумента3,
	|	СписокЛьгот.СерияДокумента3,
	|	СписокЛьгот.НомерДокумента3,
	|	СписокЛьгот.ДатаВыдачиДокумента3,
	|	СписокЛьгот.ДатаОкончанияДокумента3,
	|	СписокЛьгот.КемВыдан3,
	|	СписокЛьгот.Проживающий
	|ИЗ
	|	Документ.КВП_УстановкаЛьгот.СписокЛьгот КАК СписокЛьгот
	|ГДЕ
	|	СписокЛьгот.Ссылка = &Ссылка";
	
	ТаблицаУстановкиЛьгот = Запрос.Выполнить().Выгрузить();
	
	ПараметрыПроведения.Вставить("ТаблицаУстановкиЛьгот", ТаблицаУстановкиЛьгот);
	
	Возврат ПараметрыПроведения;
	
КонецФункции

#КонецОбласти 

#Область ПроцедурыИФункцииПечати

// Заполняет список команд печати.
// 
// Параметры:
//   КомандыПечати - ТаблицаЗначений - состав полей см. в функции УправлениеПечатью.СоздатьКоллекциюКомандПечати.
//
Процедура ДобавитьКомандыПечати(КомандыПечати) Экспорт
	
КонецПроцедуры

#КонецОбласти 

#КонецЕсли