
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытийДокумента

// Процедура проведения документа.
Процедура ОбработкаПроведения(Отказ, Режим)
	
	// регистр УПЖКХ_ПланыРаботУслугДляГИС
	Движения.УПЖКХ_ПланыРаботУслуг.Записывать = Истина;
	
	// Свернем табличную часть по услуге и месяцу начисления, т.к. возможно несколько одинаковых строк
	// по услугам в исходном перечне. Это возможно, например, когда стоимость услуги разная.
	ТЗПлановыеРаботыУслуги = ПлановыеРаботыУслуги.Выгрузить();
	ТЗПлановыеРаботыУслуги.Свернуть("МесяцНачисления, РаботаУслуга", "ПлановоеКоличество");
	
	Для Каждого ТекСтрокаПлановыеРаботыУслуги Из ТЗПлановыеРаботыУслуги Цикл
		Движение = Движения.УПЖКХ_ПланыРаботУслуг.Добавить();
		Движение.Здание             = ПереченьРаботУслуг.Здание;
		Движение.Организация        = ПереченьРаботУслуг.Организация;
		Движение.МесяцНачисления    = ТекСтрокаПлановыеРаботыУслуги.МесяцНачисления;
		Движение.РаботаУслуга       = ТекСтрокаПлановыеРаботыУслуги.РаботаУслуга;
		Движение.ПереченьРаботУслуг = ПереченьРаботУслуг;
		Движение.ПлановоеКоличество = ТекСтрокаПлановыеРаботыУслуги.ПлановоеКоличество;
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли