
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

#Область СлужебныеПроцедурыиФункции

&НаКлиенте
// Обработчик события "ПриОткрытии" формы.
//
Процедура ПриОткрытии(Отказ)
	
	// При открытии формы документа определяется, какой механизм отражения начислений используется.
	Если Объект.Ссылка.Пустая() Тогда
		// Для нового документа получаем настройку отражения из настроек.
		ИспользоватьНовыйМеханизмОтражения = УПЖКХ_ПараметрыУчетаСервер.ИспользоватьНовыйМеханизмОтраженияНачисленийВРеглУчете(УПЖКХ_ТиповыеМетодыКлиентСервер.ПолучитьРабочуюДату());
	Иначе
		// Для существующего документа вариант отражения хранится в реквизите документа.
		ИспользоватьНовыйМеханизмОтражения = Объект.ИспользуетсяНовыйМеханизмОтраженияНачислений;
	КонецЕсли;
	
	// Открываем соответствующую форму документа в зависимости от механизма отражения.
	Если ИспользоватьНовыйМеханизмОтражения Тогда
		ОткрытьФорму("Документ.КВП_ОтражениеНачисленийВРеглУчете.Форма.ФормаДокументаНовыйМеханизмОтражения",
					Новый Структура("Ключ", Объект.Ссылка));
	Иначе
		ОткрытьФорму("Документ.КВП_ОтражениеНачисленийВРеглУчете.Форма.ФормаДокументаСтарыйМеханизмОтражения",
					Новый Структура("Ключ", Объект.Ссылка));
	КонецЕсли;
	
	// Закрываем текущую служебную форму.
	Отказ = Истина;
	
КонецПроцедуры

#КонецОбласти