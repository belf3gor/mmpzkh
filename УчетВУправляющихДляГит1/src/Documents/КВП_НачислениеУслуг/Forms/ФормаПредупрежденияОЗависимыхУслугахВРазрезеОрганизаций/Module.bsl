
#Область СлужебныеПроцедурыИФункции

&НаСервереБезКонтекста
// Процедура сохраняет настройку вывода предупреждения на сервере.
//
Процедура СохранитьНастройкуПредупрежденияНаСервере()
	
	ХранилищеОбщихНастроек.Сохранить("ФормаПредупрежденияОЗависимыхУслугахВРазрезеОрганизаций", "ПоказыватьПредупреждение", Ложь);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийФормы

&НаСервере
// Обработчик события "ПриСозданииНаСервере" формы.
//
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Получение текста из макета HTML-документа.
	МакетПредупреждения = Документы.КВП_НачислениеУслуг.ПолучитьМакет("ПредупреждениеОНачисленияхЗависимыхУслугВРазрезеОрганизаций");
	ТекстСообщения      = МакетПредупреждения.ПолучитьТекст();
	
КонецПроцедуры

&НаКлиенте
// Обработчик события "ПередЗакрытием" формы.
//
Процедура ПередЗакрытием(Отказ, ЗавершениеРаботы, ТекстПредупреждения, СтандартнаяОбработка)
	
	Если ЗавершениеРаботы Тогда
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
	Если БольшеНеПоказывать Тогда
		СохранитьНастройкуПредупрежденияНаСервере();
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
// Обработчик команды "ОткрытьНастройкуЗависимостейУслуг".
//
Процедура ОткрытьНастройкуЗависимостейУслуг(Команда)
	
	ОткрытьФорму("РегистрСведений.КВП_ЗависимостиУслуг.Форма.ФормаСписка",, ВладелецФормы);
	
	Закрыть();
	
КонецПроцедуры

#КонецОбласти
