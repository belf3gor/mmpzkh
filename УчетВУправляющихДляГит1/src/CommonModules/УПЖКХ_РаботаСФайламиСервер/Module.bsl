
#Область СлужебныеПроцедуры

// Возвращает сформированный массив описаний передаваемых файлов.
//  Параметры:
//   СоответствиеИмениИАдреса - Соответствие - массив соответствий имени файла и его адреса в хранилище
//
// Возвращаемое значение:
//  МассивПередаваемыхФайлов - Массив - массив описаний передаваемых файлов.
//
Функция ПолучитьМассивПередаваемыхФайлов(СоответствиеИмениИАдреса) Экспорт
	
	МассивПередаваемыхФайлов = Новый Массив();
	Для Каждого Строка Из СоответствиеИмениИАдреса Цикл
		МассивПередаваемыхФайлов.Добавить(Новый ОписаниеПередаваемогоФайла(Строка.Ключ, Строка.Значение));
	КонецЦикла;
		
	Возврат МассивПередаваемыхФайлов;
	
КонецФункции // ПолучитьМассивПередаваемыхФайлов()

// Возвращает массив загружаемых файлов по переданным именам.
//
// Параметры:
//  МассивИменФайлов - Массив - массив, содержащий полные имена передаваемых файлов.
//
// Возвращаемое значение:
//  МассивПередаваемыхФайлов - Массив - массив описаний передаваемых файлов.
Функция ПодготовитьМассивПередаваемыхФайловДляЗагрузки(МассивИменФайлов) Экспорт
	
	СоответствиеИменФайловИАдресов = Новый Соответствие;
	
	Попытка
		Для Каждого ИмяФайла Из МассивИменФайлов Цикл
			СоответствиеИменФайловИАдресов.Вставить(ИмяФайла, ПоместитьВоВременноеХранилище(Новый ДвоичныеДанные(ИмяФайла), Новый УникальныйИдентификатор));
		КонецЦикла;
	Исключение
		УПЖКХ_ТиповыеМетодыКлиентСервер.СообщитьОбОшибке("Файл не найден!");
		Возврат Неопределено;
	КонецПопытки;
	
	МассивПередаваемыхФайлов = ПолучитьМассивПередаваемыхФайлов(СоответствиеИменФайловИАдресов);
	Возврат МассивПередаваемыхФайлов;
	
КонецФункции // ПодготовитьМассивПередаваемыхФайловДляЗагрузки()

#КонецОбласти
