#Область ПрограммныйИнтерфейс

// Возвращает список параметров для вызова метода взаимодействия по его имени.
//
// Параметры:
//   МетодВзаимодействия - имя метода из списка методов ИнтеграцияСПлатформойСамозанятые.МетодыВзаимодействия()
//
// Возвращаемое значение:
//  Структура - ключом является имя параметра, значение - пустым значением нужного типа
//
Функция НовыеПараметрыМетодаВзаимодействия(МетодВзаимодействия) Экспорт
	
	// Подключение и отключение сервиса, получение списка разрешений
	
	Если МетодВзаимодействия = "КодПодтверждения" Тогда
		
		Возврат НовыеПараметры_КодПодтверждения(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "ЗапросНаПривязку" Тогда
		
		Возврат НовыеПараметры_ЗапросНаПривязку(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "СтатусЗапросаНаПривязку" Тогда
		
		Возврат НовыеПараметры_СтатусЗапросаНаПривязку(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "ЗапросНаОтвязку" Тогда
		
		Возврат НовыеПараметры(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "СписокРазрешений" Тогда
		
		Возврат НовыеПараметры(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "ДетальныйСтатусНалогоплательщика" Тогда
		
		Возврат НовыеПараметры(МетодВзаимодействия);
		
	// Регистрация и сторнирование доходов
		
	ИначеЕсли МетодВзаимодействия = "РегистрацияДохода" Тогда
		
		Возврат НовыеПараметры_РегистрацияДохода(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "СторнированиеДохода" Тогда
		
		Возврат НовыеПараметры_СторнированиеДохода(МетодВзаимодействия);
		
	// Состояние лицевого счета, информация о зарегистрированных доходах за период
	
	ИначеЕсли МетодВзаимодействия = "СостояниеЛицевогоСчета" Тогда
		
		Возврат НовыеПараметры(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "СписокДоходов" Тогда
		
		Возврат НовыеПараметры_СписокДоходов(МетодВзаимодействия);
		
	// Начисленный налог, получение реквизитов квитанции на уплату
	
	ИначеЕсли МетодВзаимодействия = "ИнформацияОНачислениях" Тогда
		
		Возврат НовыеПараметры_ИнформацияОНачислениях(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "СписокКвитанцийНаУплатуНалога" Тогда
		
		Возврат НовыеПараметры_СписокКвитанцийНаУплатуНалога(МетодВзаимодействия);
		
	// Справки
	
	ИначеЕсли МетодВзаимодействия = "СправкаОПостановкеНаУчет" Тогда
		
		Возврат НовыеПараметры(МетодВзаимодействия);
		
	ИначеЕсли МетодВзаимодействия = "СправкаОДоходах" Тогда
		
		Возврат НовыеПараметры_СправкаОДоходах(МетодВзаимодействия);
		
	Иначе
		
		ВызватьИсключение СтрШаблон("ИнтеграцияСПлатформойСамозанятыеКлиентСервер.НовыеПараметрыМетодаВзаимодействия():
			|Метод взаимодействия %1 не определен", МетодВзаимодействия);
		
	КонецЕсли;
	
КонецФункции

// Возвращает перечисление статусов выполнения методов взаимодействия.
//
// Возвращаемое значение:
//  Структура
//
Функция СтатусыЗапросов() Экспорт
	
	СтатусыЗапросов = Новый Структура;
	СтатусыЗапросов.Вставить("Выполняется", "Выполняется");
	СтатусыЗапросов.Вставить("Выполнено", "Выполнено");
	СтатусыЗапросов.Вставить("Ошибка", "Ошибка");
	СтатусыЗапросов.Вставить("Отменено", "Отменено");
	
	Возврат СтатусыЗапросов;
	
КонецФункции

// Возвращает имя события для записей событий в журнал регистрации
//
Функция ИмяСобытияЖурналаРегистрации() Экспорт
	
	Возврат НСтр("ru = 'Интеграция с платформой Самозанятые'", 
		ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
	
КонецФункции

// Возвращает адрес сервиса
//
Функция АдресСервиса() Экспорт
	
	Возврат "https://lknpd.nalog.ru";
	
КонецФункции

// Возвращает адрес начальной страницы сервиса
//
Функция АдресСтраницыАутентификацииСервиса() Экспорт
	
	Возврат АдресСервиса() + "/auth/login";
	
КонецФункции

// Возвращает адрес страницы с настройками сервиса
//
Функция АдресСтраницыНастройкиСервиса() Экспорт
	
	Возврат АдресСервиса() + "/settings";
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция НовыеПараметры_КодПодтверждения(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("НомерТелефона", "");
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_ЗапросНаПривязку(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("НомерТелефона", "");
	ПараметрыМетода.Вставить("ИдентификаторКодаПодтверждения", "");
	ПараметрыМетода.Вставить("КодПодтверждения", "");
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_СтатусЗапросаНаПривязку(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("Идентификатор", "");
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_РегистрацияДохода(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("УИДЧека", ""); // уникальный номер документа в программе
	ПараметрыМетода.Вставить("ДатаРасчета", Дата(1, 1, 1));
	ПараметрыМетода.Вставить("ДатаФормирования", Дата(1, 1, 1));
	ПараметрыМетода.Вставить("Контрагент", ПредопределенноеЗначение("Справочник.Контрагенты.ПустаяСсылка"));
	ПараметрыМетода.Вставить("Услуги", Неопределено);
	ПараметрыМетода.Вставить("СуммаДокумента", 0);
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_СторнированиеДохода(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("УИДЧека", ""); // уникальный номер документа в программе
	ПараметрыМетода.Вставить("ИдентификаторЧека", "");
	ПараметрыМетода.Вставить("ПричинаОтменыЧека", "");
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_СписокДоходов(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("НачалоПериода", Дата(1, 1, 1));
	ПараметрыМетода.Вставить("КонецПериода", Дата(1, 1, 1));
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_ИнформацияОНачислениях(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("Период", Дата(1, 1, 1));
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_СписокКвитанцийНаУплатуНалога(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("НачалоПериода", Дата(1, 1, 1));
	ПараметрыМетода.Вставить("КонецПериода", Дата(1, 1, 1));
	
	Возврат ПараметрыМетода;
	
КонецФункции

Функция НовыеПараметры_СправкаОДоходах(МетодВзаимодействия)
	
	ПараметрыМетода = НовыеПараметры(МетодВзаимодействия);
	ПараметрыМетода.Вставить("НачалоПериода", Дата(1, 1, 1));
	ПараметрыМетода.Вставить("КонецПериода", Дата(1, 1, 1));
	
	Возврат ПараметрыМетода;
	
КонецФункции

// Возвращает список параметров по умолчанию
//
// Возвращаемое значение:
//  Структура
//
Функция НовыеПараметры(МетодВзаимодействия)
	
	ПараметрыМетода = Новый Структура;
	ПараметрыМетода.Вставить("МетодВзаимодействия", МетодВзаимодействия);
	ПараметрыМетода.Вставить("Организация", ПредопределенноеЗначение("Справочник.Организации.ПустаяСсылка"));
	
	Возврат ПараметрыМетода;
	
КонецФункции

#КонецОбласти
