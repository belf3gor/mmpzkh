#Область СлужебныйПрограммныйИнтерфейс

// Открывает помощник Регистрация организации (ИП)
//
Функция ОткрытьПомощникРегистрации() Экспорт
	
	ПараметрыНавигацииПомощника = РегистрацияОрганизацииВызовСервера.ПараметрыНавигацииПомощникаРегистрации();
	Если ПараметрыНавигацииПомощника.СтруктураНавигации <> Неопределено Тогда
		НавигацияПомощниковКлиент.ОткрытьЭтап(
			ПараметрыНавигацииПомощника.НомерШага,
			ПараметрыНавигацииПомощника.СтруктураНавигации);
		Результат = Истина;
	Иначе
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Сервис регистрации отключен или не используется'"));
		Результат = Ложь;
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

// Открывает помощник Внесение изменений в ЕГРЮЛ (ЕГРИП)
//
// Параметры:
//   ПараметрыПомощника - см. РегистрацияОрганизацииКлиентСервер.НовыеПараметрыПомощникаВнесенияИзменений()
//
Функция ОткрытьПомощникВнесенияИзменений(Знач ПараметрыПомощника = Неопределено) Экспорт
	
	Если ПараметрыПомощника = Неопределено Тогда
		ПараметрыПомощника = РегистрацияОрганизацииКлиентСервер.НовыеПараметрыПомощникаВнесенияИзменений();
	КонецЕсли;
	
	ОткрытьФорму("Обработка.РегистрацияОрганизации.Форма.ВнесениеИзмененийЕГР", ПараметрыПомощника);
	Возврат Истина;
	
КонецФункции

Процедура ОткрытьЭтап(НомерТекущегоШага) Экспорт
	
	СтруктураНавигации = РегистрацияОрганизацииВызовСервера.СтруктураНавигацииПомощникаРегистрации();
	Если СтруктураНавигации <> Неопределено Тогда
		НавигацияПомощниковКлиент.ОткрытьЭтап(НомерТекущегоШага, СтруктураНавигации);
	Иначе
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Сервис регистрации отключен или не используется'"));
	КонецЕсли;
	
КонецПроцедуры

Процедура ОбработатьНавигационнуюСсылку(НавигационнаяСсылка, СтандартнаяОбработка) Экспорт
	
	Если НавигацияПомощниковКлиент.ЭтоНавигационнаяСсылкаШага(НавигационнаяСсылка) Тогда
		СтандартнаяОбработка = Ложь;
		НавигацияПомощниковКлиент.ОбработатьНавигационнуюСсылку(
			НавигационнаяСсылка,
			РегистрацияОрганизацииВызовСервера.СтруктураНавигацииПомощникаРегистрации());
	КонецЕсли;
	
КонецПроцедуры

Процедура ОповеститьОбОткрытии(Форма, ИмяПомощника, НомерШага) Экспорт
	
	Оповестить("ОткрытШагПомощника_РегистрацияОрганизации",
		Новый Структура("ИмяПомощника, НомерШага", ИмяПомощника, НомерШага),
		Форма);
	
КонецПроцедуры

Функция ОткрытьФормуУчредителя(Элемент, ТекущиеДанные) Экспорт
	
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("РежимВыбора", Истина);
	
	Если ЗначениеЗаполнено(ТекущиеДанные.Ссылка) Тогда
		ПараметрыФормы.Вставить("Ключ", ТекущиеДанные.Ссылка);
	Иначе
		ПараметрыФормы.Вставить("ТекстЗаполнения", ТекущиеДанные.Наименование);
	КонецЕсли;
	
	Если ТекущиеДанные.ТипУчредителя = ПредопределенноеЗначение("Перечисление.ЮридическоеФизическоеЛицо.ЮридическоеЛицо") Тогда
		ЗначенияЗаполнения = Новый Структура;
		ЗначенияЗаполнения.Вставить("ЮридическоеФизическоеЛицо", ПредопределенноеЗначение("Перечисление.ЮридическоеФизическоеЛицо.ЮридическоеЛицо"));
		ПараметрыФормы.Вставить("ЗначенияЗаполнения", ЗначенияЗаполнения);
		ИмяФормы = "Обработка.РегистрацияОрганизации.Форма.ФормаЮридическогоЛица";
	Иначе
		ИмяФормы = "Обработка.РегистрацияОрганизации.Форма.ФормаФизическогоЛица";
	КонецЕсли;
	
	ОткрытьФорму(ИмяФормы, ПараметрыФормы, Элемент);
	
КонецФункции

// см. РегламентированнаяОтчетностьКлиентПереопределяемый.ПередОткрытиемФормыУведомления
//
Процедура ПередОткрытиемФормыУведомления(Организация, ВидУведомления, СтандартнаяОбработка) Экспорт
	
	Если РегистрацияОрганизацииВызовСервера.ЭтоУведомлениеВнесениеИзмененийЕГР(ВидУведомления) Тогда
		СтандартнаяОбработка = Ложь;
	КонецЕсли;
	
КонецПроцедуры

// См. РегламентированнаяОтчетностьКлиентПереопределяемый.ОбработчикСозданияУведомления
//
Процедура ОбработчикСозданияУведомления(Форма, Параметр) Экспорт
	
	Если ТипЗнч(Параметр) <> Тип("Структура") Тогда
		Возврат;
	КонецЕсли;
	
	ВидУведомления = Неопределено;
	Параметр.Свойство("ВидУведомления", ВидУведомления);
	
	Если РегистрацияОрганизацииВызовСервера.ЭтоУведомлениеВнесениеИзмененийЕГР(ВидУведомления)
		Или УчетПСНВызовСервера.ЭтоУведомлениеЗаявлениеНаПолучениеПатента(ВидУведомления) Тогда
		
		ОткрытьФорму("Обработка.РегистрацияОрганизации.Форма.ФормаСозданияУведомления", Параметр, Форма);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти
