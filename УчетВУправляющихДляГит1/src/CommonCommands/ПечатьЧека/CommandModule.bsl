
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	ОписаниеОповещения = Новый ОписаниеОповещения("ПечатьЧекаЗавершение", ЭтотОбъект, Новый Структура("Форма", ПараметрыВыполненияКоманды.Источник));
	
	ПечатьФискальныхДокументовКлиент.НапечататьЧек(ПараметрыВыполненияКоманды.Источник, ОписаниеОповещения);
КонецПроцедуры

&НаКлиенте
Процедура ПечатьЧекаЗавершение(Результат, ДополнительныеПараметры) Экспорт
	Если Результат.Успешно Тогда
		Форма =  ДополнительныеПараметры.Форма;
		Объект = Форма.Объект;
		
		Объект.НомерЧекаККМ = Результат.НомерЧекаККМ;
		
		// Параметры операции при оплате картой
		ЗаполнитьЗначенияСвойств(Объект, Результат.ПараметрыОплаты);
		
		Форма.Записать();
	ИначеЕсли ЗначениеЗаполнено(Результат.СообщениеОбОшибке) Тогда 
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю(Результат.СообщениеОбОшибке);
	КонецЕсли; 
КонецПроцедуры 
