
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Организация = Параметры.Организация;
	
	ИмяОтчета =
		УведомлениеОСпецрежимахНалогообложенияПовтИсп.ПолучитьСоответствиеВидовУведомленийИменамОтчетов()[Параметры.ВидУведомления];
	
	ТаблицаФорм = Отчеты[ИмяОтчета].ПолучитьТаблицуФорм();
	СписокВыбора = Элементы.ПолеРедакцияФормы.СписокВыбора;
	СписокВыбора.Очистить();
	Для Каждого СтрокаТаблицы Из ТаблицаФорм Цикл
		СписокВыбора.Добавить(СтрокаТаблицы.ИмяФормы, СтрокаТаблицы.ОписаниеФормы);
		ПолеРедакцияФормы = СтрокаТаблицы.ИмяФормы;
	КонецЦикла;
	
	УведомлениеМожноЗаполнитьВПомощнике = Обработки.РегистрацияОрганизации.ДоступенСервис1СКонтрагент();
	
	Элементы.Создать.Доступность = ЗначениеЗаполнено(Организация);
	Элементы.ФормаСоздатьБезПомощника.Видимость = УведомлениеМожноЗаполнитьВПомощнике;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ОрганизацияПриИзменении(Элемент)
	Элементы.Создать.Доступность = ЗначениеЗаполнено(Организация);
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Создать(Команда)
	Заполнить();
КонецПроцедуры

&НаКлиенте
Процедура СоздатьБезПомощника(Команда)
	Заполнить(Истина);
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура Заполнить(БезПомощника = Ложь)
	
	Если Не ПроверитьЗаполнение() Тогда
		Возврат;
	КонецЕсли;
	
	Если ИмяОтчета = "РегламентированноеУведомлениеПолучениеПатента" И Не БезПомощника Тогда
		
		ПараметрыПомощника = Новый Структура;
		ПараметрыПомощника.Вставить("Организация", Организация);
		ПараметрыПомощника.Вставить("СоздатьНовоеЗаявление", Истина);
		
		ОткрытьФорму("Обработка.ПомощникЗаполненияЗаявленияНаПолучениеПатента.Форма", ПараметрыПомощника);
		
	ИначеЕсли Не БезПомощника
		И УведомлениеМожноЗаполнитьВПомощнике Тогда
		
		ПараметрыПомощника = РегистрацияОрганизацииКлиентСервер.НовыеПараметрыПомощникаВнесенияИзменений();
		ПараметрыПомощника.Организация = Организация;
		ПараметрыПомощника.КонтекстныйВызов = Истина;
		ПараметрыПомощника.СоздатьПриОткрытии = Истина;
		
		РегистрацияОрганизацииКлиент.ОткрытьПомощникВнесенияИзменений(ПараметрыПомощника);
	Иначе
		ПараметрыОткрытия = Новый Структура("Организация", Организация);
		ОткрытьФорму(СтрШаблон("Отчет.%1.Форма.%2", ИмяОтчета, ПолеРедакцияФормы), ПараметрыОткрытия, ВладелецФормы);
	КонецЕсли;
	
	Закрыть();
	
КонецПроцедуры

#КонецОбласти
