#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

////////////////////////////////////////////////////////////////////////////////
// Обработчики выгрузки конвертации БП 3.0 --> ЗУП 3.0 {0d26307d-a9ce-11e3-be48-e0cb4ed5f645}                                                                                                        
// 
// Данный модуль содержит экспортные процедуры обработчиков событий конвертации 
// и предназначен для отладки правил обмена. После отладки рекомендуется
// скопировать текст модуля в буфер обмена и импортировать его в базу
// "Конвертация данных".
//
////////////////////////////////////////////////////////////////////////////////
// ИСПОЛЬЗУЕМЫЕ СОКРАЩЕНИЯ ИМЕН ПЕРЕМЕННЫХ (АББРЕВИАТУРЫ)
//
//  ПКО  - правило конвертации объектов
//  ПКС  - правило конвертации свойств объектов
//  ПКГС - правило конвертации группы свойств объектов
//  ПВД  - правило выгрузки данных
//  ПОД  - правило очистки данных

////////////////////////////////////////////////////////////////////////////////
// ПЕРЕМЕННЫЕ ОБРАБОТКИ
// Данный раздел изменять запрещено.

Перем Параметры;
Перем Алгоритмы;
Перем Запросы;
Перем УзелДляОбмена;
Перем ОбщиеПроцедурыФункции;

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОНВЕРТАЦИИ (ГЛОБАЛЬНЫЕ)
// В данном разделе разрешено изменять реализацию процедур.

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОНВЕРТАЦИИ ОБЪЕКТОВ
// В данном разделе разрешено изменять реализацию процедур.

Процедура ПКО_ВидыКонтактнойИнформации_ПередВыгрузкойОбъекта(ФайлОбмена, Источник, ВходящиеДанные, ИсходящиеДанные, ИмяПКО, ПКО,
	ВыгруженныеОбъекты, Отказ, КлючВыгружаемыхДанных, ЗапоминатьВыгруженные,
	НеЗамещатьОбъектПриЗагрузке, ВсеОбъектыВыгружены, ТолькоПолучитьУзелСсылки,
	Приемник, РежимЗаписи, РежимПроведения, НеСоздаватьЕслиНеНайден) Экспорт

	НеЗамещатьОбъектПриЗагрузке = Источник.Предопределенный;

КонецПроцедуры

Процедура ПКО_ВыдачаЗаймаСотрудникуБанк_ПриВыгрузкеОбъекта(ФайлОбмена, Источник, ВходящиеДанные, ИсходящиеДанные, ИмяПКО, ПКО,
	ВыгруженныеОбъекты, КлючВыгружаемыхДанных, Отказ, СтандартнаяОбработка,
	Приемник, УзелСсылки) Экспорт

	ВходящиеДанные = Новый Структура("ФормаРасчетов");
	ВходящиеДанные.ФормаРасчетов = Перечисления.ФормыОплаты.Безналичная;

КонецПроцедуры

Процедура ПКО_ВыдачаЗаймаСотрудникуКасса_ПриВыгрузкеОбъекта(ФайлОбмена, Источник, ВходящиеДанные, ИсходящиеДанные, ИмяПКО, ПКО,
	ВыгруженныеОбъекты, КлючВыгружаемыхДанных, Отказ, СтандартнаяОбработка,
	Приемник, УзелСсылки) Экспорт

	ВходящиеДанные = Новый Структура("ФормаРасчетов");
	ВходящиеДанные.ФормаРасчетов = Перечисления.ФормыОплаты.Наличная;

КонецПроцедуры

Процедура ПКО_ВыплатаДепонированнойЗарплатыБанк_ПриВыгрузкеОбъекта(ФайлОбмена, Источник, ВходящиеДанные, ИсходящиеДанные, ИмяПКО, ПКО,
	ВыгруженныеОбъекты, КлючВыгружаемыхДанных, Отказ, СтандартнаяОбработка,
	Приемник, УзелСсылки) Экспорт

	ВходящиеДанные = Новый Структура("ФормаРасчетов");
	ВходящиеДанные.ФормаРасчетов = Перечисления.ФормыОплаты.Безналичная;

КонецПроцедуры

Процедура ПКО_ВыплатаДепонированнойЗарплатыКасса_ПриВыгрузкеОбъекта(ФайлОбмена, Источник, ВходящиеДанные, ИсходящиеДанные, ИмяПКО, ПКО,
	ВыгруженныеОбъекты, КлючВыгружаемыхДанных, Отказ, СтандартнаяОбработка,
	Приемник, УзелСсылки) Экспорт

	ВходящиеДанные = Новый Структура("ФормаРасчетов");
	ВходящиеДанные.ФормаРасчетов = Перечисления.ФормыОплаты.Наличная;

КонецПроцедуры

Процедура ПКО_ПогашениеЗаймаСотрудникуБанк_ПриВыгрузкеОбъекта(ФайлОбмена, Источник, ВходящиеДанные, ИсходящиеДанные, ИмяПКО, ПКО,
	ВыгруженныеОбъекты, КлючВыгружаемыхДанных, Отказ, СтандартнаяОбработка,
	Приемник, УзелСсылки) Экспорт

	ВходящиеДанные = Новый Структура("ФормаРасчетов");
	ВходящиеДанные.ФормаРасчетов = Перечисления.ФормыОплаты.Безналичная;

КонецПроцедуры

Процедура ПКО_ПогашениеЗаймаСотрудникуКасса_ПриВыгрузкеОбъекта(ФайлОбмена, Источник, ВходящиеДанные, ИсходящиеДанные, ИмяПКО, ПКО,
	ВыгруженныеОбъекты, КлючВыгружаемыхДанных, Отказ, СтандартнаяОбработка,
	Приемник, УзелСсылки) Экспорт

	ВходящиеДанные = Новый Структура("ФормаРасчетов");
	ВходящиеДанные.ФормаРасчетов = Перечисления.ФормыОплаты.Наличная;

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОНВЕРТАЦИИ СВОЙСТВ ОБЪЕКТОВ
// В данном разделе разрешено изменять реализацию процедур.

Процедура ПКС_ВыдачаЗаймаСотрудникуБанк_ФормаРасчетов_ПередВыгрузкойСвойства_10_25(ФайлОбмена, Источник, Приемник, ВходящиеДанные, ИсходящиеДанные,
	ПКС, ПКО, ОбъектКоллекции, Отказ, Значение, ТипПриемника, ИмяПКО,
	ИмяПКОВидСубконто, Пусто, Выражение, УзелКоллекцииСвойств, НеЗамещать,
	ВыгрузитьОбъект) Экспорт

	Значение = "Безналичная";

КонецПроцедуры

Процедура ПКС_ВыдачаЗаймаСотрудникуКасса_ФормаРасчетов_ПередВыгрузкойСвойства_10_26(ФайлОбмена, Источник, Приемник, ВходящиеДанные, ИсходящиеДанные,
	ПКС, ПКО, ОбъектКоллекции, Отказ, Значение, ТипПриемника, ИмяПКО,
	ИмяПКОВидСубконто, Пусто, Выражение, УзелКоллекцииСвойств, НеЗамещать,
	ВыгрузитьОбъект) Экспорт

	Значение = "Наличная";

КонецПроцедуры

Процедура ПКС_ПогашениеЗаймаСотрудникуБанк_ФормаРасчетов_ПередВыгрузкойСвойства_10_28(ФайлОбмена, Источник, Приемник, ВходящиеДанные, ИсходящиеДанные,
	ПКС, ПКО, ОбъектКоллекции, Отказ, Значение, ТипПриемника, ИмяПКО,
	ИмяПКОВидСубконто, Пусто, Выражение, УзелКоллекцииСвойств, НеЗамещать,
	ВыгрузитьОбъект) Экспорт

	Значение = "Безналичная";

КонецПроцедуры

Процедура ПКС_ПогашениеЗаймаСотрудникуКасса_ФормаРасчетов_ПередВыгрузкойСвойства_10_29(ФайлОбмена, Источник, Приемник, ВходящиеДанные, ИсходящиеДанные,
	ПКС, ПКО, ОбъектКоллекции, Отказ, Значение, ТипПриемника, ИмяПКО,
	ИмяПКОВидСубконто, Пусто, Выражение, УзелКоллекцииСвойств, НеЗамещать,
	ВыгрузитьОбъект) Экспорт

	Значение = "Наличная";

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОНВЕРТАЦИИ ГРУПП СВОЙСТВ ОБЪЕКТОВ
// В данном разделе разрешено изменять реализацию процедур.

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ ВЫГРУЗКИ ДАННЫХ
// В данном разделе разрешено изменять реализацию процедур.

Процедура ПВД_ВедомостьНаВыплатуЗарплаты_ПередВыгрузкойОбъекта(ФайлОбмена, Отказ, ИмяПКО, Правило, ВходящиеДанные, ИсходящиеДанные, Объект) Экспорт

	Если Объект.ВидМестаВыплаты = Перечисления.ВидыМестВыплатыЗарплаты.ЗарплатныйПроект Тогда
		ИмяПКО = "ВедомостьНаВыплатуЗарплатыВБанк";
	ИначеЕсли Объект.ВидМестаВыплаты = Перечисления.ВидыМестВыплатыЗарплаты.БанковскийСчет Тогда
		ИмяПКО = "ВедомостьНаВыплатуЗарплатыПеречислением";
	ИначеЕсли Объект.ВидМестаВыплаты = Перечисления.ВидыМестВыплатыЗарплаты.Раздатчик Тогда
		ИмяПКО = "ВедомостьНаВыплатуЗарплатыРаздатчиком";
	Иначе
		ИмяПКО = "ВедомостьНаВыплатуЗарплатыВКассу";
	КонецЕсли;

КонецПроцедуры

Процедура ПВД_РасходныйКассовыйОрдер_ПередВыгрузкойОбъекта(ФайлОбмена, Отказ, ИмяПКО, Правило, ВходящиеДанные, ИсходящиеДанные, Объект) Экспорт

	Если Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ВыдачаЗаймаРаботнику Тогда
		ИмяПКО = "ВыдачаЗаймаСотрудникуКасса";
	ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ВыплатаДепонентов Тогда
		ИмяПКО = "ВыплатаДепонированнойЗарплатыКасса";
	Иначе
		Отказ = Истина;
	КонецЕсли;

КонецПроцедуры

Процедура ПВД_СписаниеСРасчетногоСчета_ПередВыгрузкойОбъекта(ФайлОбмена, Отказ, ИмяПКО, Правило, ВходящиеДанные, ИсходящиеДанные, Объект) Экспорт

	Если Объект.ВидОперации = Перечисления.ВидыОперацийСписаниеДенежныхСредств.ВыдачаЗаймаРаботнику Тогда
		ИмяПКО = "ВыдачаЗаймаСотрудникуБанк";
	ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийСписаниеДенежныхСредств.ПеречислениеДепонентов Тогда
		ИмяПКО = "ВыплатаДепонированнойЗарплатыБанк";
	Иначе
		Отказ = Истина;
	КонецЕсли;

КонецПроцедуры

Процедура ПВД_ФизическиеЛица_ПередВыгрузкойОбъекта(ФайлОбмена, Отказ, ИмяПКО, Правило, ВходящиеДанные, ИсходящиеДанные, Объект) Экспорт

	Если Объект.ЭтоГруппа Тогда
		ИмяПКО = "ФизическиеЛицаГруппа";
	КонецЕсли;
	

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ ОЧИСТКИ ДАННЫХ
// В данном разделе разрешено изменять реализацию процедур.

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ ПАРАМЕТРОВ
// В данном разделе разрешено изменять реализацию процедур.

////////////////////////////////////////////////////////////////////////////////
// АЛГОРИТМЫ
// Данный раздел разрешено изменять.
// Также допустимо размещать процедуры с алгоритмами в любом из разделов выше.

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ
// Данный раздел изменять запрещено.

// Служебная. Инициализирует переменные, необходимые для отладки
//
// Параметры:
//  Владелец - Обработка КонвертацияОбъектовИнформационныхБаз
//
Процедура ПодключитьОбработкуДляОтладки(Владелец) Экспорт

	Параметры            	 = Владелец.Параметры;
	ОбщиеПроцедурыФункции	 = Владелец;
	Запросы              	 = Владелец.Запросы;
	УзелДляОбмена		 	 = Владелец.УзелДляОбмена;

КонецПроцедуры

#КонецЕсли
