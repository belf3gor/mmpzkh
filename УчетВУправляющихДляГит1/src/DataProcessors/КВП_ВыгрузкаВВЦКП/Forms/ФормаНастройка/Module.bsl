////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ ОБЩЕГО НАЗНАЧЕНИЯ

#Область ПроцедурыОбщегоНазначения

&НаСервере
// Процедура сохранения настроек на сервера.
Функция СохранитьНастройкиНаСервере()
	
	Структура = Новый Структура;
	
	Структура.Вставить("ЛицевойСчетОрганизации", Объект.ЛицевойСчетОрганизации);
	Структура.Вставить("ЛицевойСчетКонтрагента", Объект.ЛицевойСчетКонтрагента);
	Структура.Вставить("КодОрганизации", Объект.КодОрганизации);
	Структура.Вставить("ЖилищныеУслуги", Объект.ЖилищныеУслуги.Выгрузить());
	Структура.Вставить("КоммунальныеУслуги", Объект.КоммунальныеУслуги.Выгрузить());
	Структура.Вставить("УслугиПрямойДоговор", Объект.УслугиПрямойДоговор.Выгрузить());
	
	Возврат ПоместитьВоВременноеХранилище(Структура, Новый УникальныйИдентификатор);
	
КонецФункции

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ КОМАНДНЫХ ПАНЕЛЕЙ

#Область СобытияКомандныхПанелей

&НаКлиенте
// Процедура - Обработчик нажатия кнопки "ОК".
//
Процедура ОК(Команда)
	
	АдресХранилища = СохранитьНастройкиНаСервере();
	
	Оповестить("НастройкиВыгрузки_Обновить", АдресХранилища);
	
	Закрыть(Истина);

КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ТАБЛИЧНЫХ ЧАСТЕЙ

#Область СобытияТабличныхЧастей

&НаКлиенте
// Процедура - Обработчик события "ПередНачаломДобавления" ТЧ УслугиПрямойДоговор.
//
Процедура УслугиПрямойДоговорПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)

	Отказ = Истина;
	
КонецПроцедуры

&НаКлиенте
// Процедура - Обработчик события "ПередУдалением" ТЧ УслугиПрямойДоговор.
//
Процедура УслугиПрямойДоговорПередУдалением(Элемент, Отказ)
	
	Отказ = Истина;
	
КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

#Область ОбработчикиСобытийФормы

&НаСервере
// Обработчик события "ПередОткрытием" формы.
//
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("ДанныеОбъекта") Тогда
		
		Объект.ЛицевойСчетКонтрагента = Параметры.ДанныеОбъекта.ЛицевойСчетКонтрагента;
		Объект.ЛицевойСчетОрганизации = Параметры.ДанныеОбъекта.ЛицевойСчетОрганизации;
		Объект.КодОрганизации = Параметры.ДанныеОбъекта.КодОрганизации;
		Объект.ЖилищныеУслуги.Загрузить(Параметры.ДанныеОбъекта.ЖилищныеУслуги.Выгрузить());
		Объект.КоммунальныеУслуги.Загрузить(Параметры.ДанныеОбъекта.КоммунальныеУслуги.Выгрузить());
		Объект.УслугиПрямойДоговор.Загрузить(Параметры.ДанныеОбъекта.УслугиПрямойДоговор.Выгрузить());
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти