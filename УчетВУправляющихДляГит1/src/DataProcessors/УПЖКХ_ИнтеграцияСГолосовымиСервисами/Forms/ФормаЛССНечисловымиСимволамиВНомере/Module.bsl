
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

#Область ОбработчикиСобытийФормы

&НаСервере
// Обработчик "ПриСозданииНаСервере" формы.
//
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если ТипЗнч(Параметры) = Тип("ДанныеФормыСтруктура") И Параметры.Свойство("МассивЛССНечисловымиСимволамиВНомере") Тогда
		ЗаполнитьТаблицуЛССНечисловымиСимволамиВНомере(Параметры.МассивЛССНечисловымиСимволамиВНомере);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ТАБЛИЦЫ Л/С С НЕЧИСЛОВЫМИ НОМЕРАМИ

#Область ОбработчикиСобытийТаблицыЛССНечисловымиНомерами

&НаКлиенте
// Обработчик события "ПередНачаломДобавления" таблицы л/с с нечисловыми номерами.
//
Процедура ТаблицаЛССНечисловымиСимволамиВНомереПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	
	Отказ = Истина;
	
КонецПроцедуры

&НаКлиенте
// Обработчик события "ПриОкончанииРедактирования" таблицы л/с с нечисловыми номерами.
//
Процедура ТаблицаЛССНечисловымиСимволамиВНомереПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)
	
	ТекЛС = Элемент.ТекущиеДанные.ЛицевойСчет;
	
	Если НЕ ОпределитьНаличиеНечисловыхСимволовВНомереЛС(ТекЛС) Тогда
		УдалитьЛСИзТаблицы(ТекЛС);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ ПО РАБОТЕ С ТАБЛИЦЕЙ Л/С С НЕЧИСЛОВЫМИ НОМЕРАМИ

#Область ПроцедурыИФункцииПоРаботеСТаблицейЛССНечисловымиНомерами

&НаСервере
// Заполняет таблицы переданными из основной формы данными.
//
Процедура ЗаполнитьТаблицуЛССНечисловымиСимволамиВНомере(МассивЛС)
	
	Для каждого ТекЛС из МассивЛС Цикл
		НоваяСтрока = ТаблицаЛССНечисловымиСимволамиВНомере.Добавить();
		НоваяСтрока.ЛицевойСчет = ТекЛС;
	КонецЦикла;
	
КонецПроцедуры

&НаСервереБезКонтекста
// Определяет, есть ли в текущем номере л/с таблицы нечисловые символы.
//
Функция ОпределитьНаличиеНечисловыхСимволовВНомереЛС(ЛицевойСчет)
	
	НомерЛС = НомерЛицевогоСчета(ЛицевойСчет.Наименование, Истина);
	
	Возврат УПЖКХ_ИнтеграцияСГолосовымиСервисамиВзаимодействиеСБазойДанных.ОпределитьНаличиеНечисловыхСимволовВНомереЛС(НомерЛС);
	
КонецФункции

&НаСервере
// Удаляет л/с из таблицы л/с с нечисловыми номерами.
//
Процедура УдалитьЛСИзТаблицы(ЛицевойСчет)
	
	СтрокиДляУдаления = ТаблицаЛССНечисловымиСимволамиВНомере.НайтиСтроки(Новый Структура("ЛицевойСчет", ЛицевойСчет));
	
	Для каждого ТекСтрокаДляУдаления из СтрокиДляУдаления Цикл
		ТаблицаЛССНечисловымиСимволамиВНомере.Удалить(ТекСтрокаДляУдаления);
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти
