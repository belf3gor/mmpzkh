
//////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

#Область Форма

&НаСервере
// Процедура - обработчик события "ПриСозданииНаСервере" формы.
//
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АдресНастроекВХранилище") И Параметры.АдресНастроекВХранилище <> Неопределено Тогда
		
		СтруктураНастроек = ПолучитьИзВременногоХранилища(Параметры.АдресНастроекВХранилище);
		
		Если ТипЗнч(СтруктураНастроек) = Тип("Структура") Тогда
			
			// Таблица настройки услуг.
			врТаблицаНастройкиУслуг = Неопределено;
			Если СтруктураНастроек.Свойство("КалининградскаяОбласть_НастройкаУслуг", врТаблицаНастройкиУслуг) Тогда
				Если ТипЗнч(врТаблицаНастройкиУслуг) = Тип("ТаблицаЗначений") Тогда
					Объект.КалининградскаяОбласть_НастройкаУслуг.Загрузить(врТаблицаНастройкиУслуг);
				КонецЕсли;
			КонецЕсли;
			
			// Таблица организаций.
			врТаблицаОрганизаций = Неопределено;
			Если СтруктураНастроек.Свойство("КалининградскаяОбласть_ТаблицаОрганизаций", врТаблицаОрганизаций) Тогда
				Если ТипЗнч(врТаблицаОрганизаций) = Тип("ТаблицаЗначений") Тогда
					Объект.КалининградскаяОбласть_ТаблицаОрганизаций.Загрузить(врТаблицаОрганизаций);
				КонецЕсли;
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры // ПриСозданииНаСервере()

#КонецОбласти

//////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

#Область КомандаСправочнаяИнформация

&НаКлиенте
// Обработчик команды "КомандаСправочнаяИнформация".
//
Процедура КомандаСправочнаяИнформация(Команда)
	
	ОткрытьСправкуФормы();
	
КонецПроцедуры // КомандаСправочнаяИнформация()

#КонецОбласти

#Область КомандаСохранить

////////////////////
// Сохранить и закрыть

&НаКлиенте
// Обработчик команды "КомандаСохранить".
//
Процедура КомандаСохранить(Команда)
	
	АдресНастроекВХранилище = ПоместитьНастройкиВХранилище(); 
	Закрыть(АдресНастроекВХранилище);
	
КонецПроцедуры // КомандаСохранить()

////////////////////
// Работа с временным хранилищем

&НаСервере
// Помещает таблицу услуг во временное хранилище.
//
// Возвращаемое значение:
//  Строка - адрес настроек во временном хранилище.
//
Функция ПоместитьНастройкиВХранилище()
	
	СтруктураНастроек = Новый Структура;
	
	СтруктураНастроек.Вставить("КалининградскаяОбласть_НастройкаУслуг",     Объект.КалининградскаяОбласть_НастройкаУслуг.Выгрузить());
	СтруктураНастроек.Вставить("КалининградскаяОбласть_ТаблицаОрганизаций", Объект.КалининградскаяОбласть_ТаблицаОрганизаций.Выгрузить());
	
	Возврат ПоместитьВоВременноеХранилище(СтруктураНастроек, Новый УникальныйИдентификатор);
	
КонецФункции // ПоместитьНастройкиВХранилище()

#КонецОбласти
