
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

//Функция задает параметры открытия оповещения о центре мониторинга.
Функция ПолучитьПараметрыОповещенияОЦентреМониторинга() Экспорт
	
	МодульЦентрМониторингаСлужебный = ОбщегоНазначения.ОбщийМодуль("ЦентрМониторингаСлужебный");
	ПараметрыЦентраМониторинга = МодульЦентрМониторингаСлужебный.ПолучитьПараметрыЦентраМониторингаВнешнийВызов();
	ПараметрыСервисаПоУмолчанию = МодульЦентрМониторингаСлужебный.ПолучитьПараметрыПоУмолчаниюВнешнийВызов();
	
	Тема            = "";
	ТекстМакета     = "";
	Показывать      = Ложь;
	
	//Если включена отправка на свой веб-сервис.
	Если ПараметрыЦентраМониторинга.ЦентрОбработкиИнформацииОПрограмме Тогда
		
		ТекстМакета = Обработки.УПЖКХ_ВзаимодействиеСПользователями.ПолучитьМакет("ЦентрМониторингаОтправкаВНаСвойВебСервис").ПолучитьТекст();
		
		Если ПараметрыЦентраМониторинга.Порт = 80 Тогда
			Схема = "http://";
			Порт = "";
		ИначеЕсли ПараметрыЦентраМониторинга.Порт = 443 Тогда
			Схема = "https://";
			Порт = "";
		Иначе
			Схема = "http://";
			Порт = ":" + Формат(ПараметрыЦентраМониторинга.Порт, "ЧН=0; ЧГ=");
		КонецЕсли;
		
		Адрес = Схема + ПараметрыЦентраМониторинга.Сервер + Порт + "/" + ПараметрыЦентраМониторинга.АдресРесурса;
		ТекстМакета = СтрЗаменить(ТекстМакета, "%Адрес%", Адрес);
		
		Тема            = "Центр мониторинга отправка на свой веб-сервис";
		Показывать      = Истина;
		
	КонецЕсли;
	
	СтруктураРезультата = Новый Структура;
	СтруктураРезультата.Вставить("Тема",                          Тема);
	СтруктураРезультата.Вставить("ТекстМакета",                   ТекстМакета);
	СтруктураРезультата.Вставить("Заголовок",                     "Пожалуйста, уделите нам минуту внимания!");
	СтруктураРезультата.Вставить("Показывать",                    Показывать);
	СтруктураРезультата.Вставить("ИспользоватьОтправкуСообщений", Истина);
	
	Возврат СтруктураРезультата;
	
КонецФункции

#КонецЕсли
