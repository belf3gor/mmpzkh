#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	РазрешеноИзменение = НЕ ПравоДоступа("Изменение", Метаданные.Константы.НастройкаЗаполненияЦеныПродажи);
	
	Элементы.ИзПредыдущегоДокумента.ТолькоПросмотр = РазрешеноИзменение; // Отключено сохранение данных, т.к. это приводит к установке модифицированности
	Элементы.ИзКарточкиНоменклатуры.ТолькоПросмотр = РазрешеноИзменение;
	
	НастройкаЦеныПродажи      			   = Константы.НастройкаЗаполненияЦеныПродажи.Получить();	
	Элементы.ПодсказкаОНастройкахФормы.Видимость   = Параметры.ОткрытаИзКарточкиНоменклатуры;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаСервереБезКонтекста
Процедура НастройкаЦеныПродажиПриИзмененииНаСервере(НастройкаЦеныПродажи)
	
	Константы.НастройкаЗаполненияЦеныПродажи.Установить(НастройкаЦеныПродажи);
	
КонецПроцедуры

&НаКлиенте
Процедура НастройкаЦеныПродажиПриИзменении(Элемент)
	
	НастройкаЦеныПродажиПриИзмененииНаСервере(НастройкаЦеныПродажи);
	Оповестить("ФормаНастройкаЦеныПродажиИзменена");
	
КонецПроцедуры

#КонецОбласти