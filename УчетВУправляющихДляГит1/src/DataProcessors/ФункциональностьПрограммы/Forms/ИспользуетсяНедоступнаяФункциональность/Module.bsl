
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Обработки.ФункциональностьПрограммы.ЗахватитьЛицензииДляИспользуемойФункциональности() Тогда
		// Для используемой функциональности нашлись свободные лицензии
		// и их удалось удачно захватить.
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
	УстановитьТекстРекомендаций();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура ОписаниеЧтоСделатьОбработкаНавигационнойСсылки(Элемент, НавигационнаяСсылкаФорматированнойСтроки, СтандартнаяОбработка)
	
	Если НавигационнаяСсылкаФорматированнойСтроки = "ФункциональностьПрограммы" Тогда
		СтандартнаяОбработка = Ложь;
		ПараметрыФормы = Новый Структура;
		ОткрытьФорму("Обработка.ФункциональностьПрограммы.Форма.ФормаФункциональностьПрограммы", ПараметрыФормы);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УстановитьТекстРекомендаций()
	
	ТекстРекомендаций = Новый Массив;
	ТекстРекомендаций.Добавить(НСтр("ru = 'Восстановить возможность проведения документов можно, отказавшись от этой функциональности.'"));
	ТекстРекомендаций.Добавить(" ");
	ТекстРекомендаций.Добавить(НСтр("ru = 'Для этого снимите флажки с пометкой'"));
	ТекстРекомендаций.Добавить(" ");
	ТекстРекомендаций.Добавить(Новый ФорматированнаяСтрока(
		ФункциональностьПрограммы.ТекстНедоступенТариф(), , , ФункциональностьПрограммы.ЦветБаннераНедоступенТариф()));
	ТекстРекомендаций.Добавить(" ");
	ТекстРекомендаций.Добавить(НСтр("ru = 'и'"));
	ТекстРекомендаций.Добавить(" ");
	ТекстРекомендаций.Добавить(Новый ФорматированнаяСтрока(
		ФункциональностьПрограммы.ТекстОграничениеТарифа(), , , ФункциональностьПрограммы.ЦветБаннераОграниченияТарифа()));
	ТекстРекомендаций.Добавить(" ");
	ТекстРекомендаций.Добавить(НСтр("ru = 'в настройках'"));
	ТекстРекомендаций.Добавить(" ");
	ТекстРекомендаций.Добавить(Новый ФорматированнаяСтрока(НСтр("ru = 'Функциональности'"), , , , "ФункциональностьПрограммы"));
	ТекстРекомендаций.Добавить(".");
	
	Элементы.ОписаниеФункциональность.Заголовок = Новый ФорматированнаяСтрока(ТекстРекомендаций);
	
	ТекстРекомендаций = Новый Массив;
	ТекстРекомендаций.Добавить(НСтр("ru = 'Если же эта функциональность вам действительно нужна, перейдите на другой тариф.'"));
	ТекстРекомендаций.Добавить(" ");
	ТекстРекомендаций.Добавить(НСтр("ru = 'Для изменения тарифа обратитесь к обслуживающей организации.'"));
	
	Элементы.ОписаниеТариф.Заголовок = Новый ФорматированнаяСтрока(ТекстРекомендаций);
	
КонецПроцедуры

#КонецОбласти
